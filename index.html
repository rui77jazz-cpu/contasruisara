<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üí∞ Sara & Rui</title>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <style>
    :root{
      --primary:#6366f1;
      --accent:#10b981;
      --warning:#f59e0b;
      --danger:#ef4444;
      --text:#1e293b;
      --muted:#64748b;
      --bg:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      --card:#fff;
      --border:#e2e8f0;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Segoe UI',system-ui,sans-serif;background:var(--bg);min-height:100vh;padding:1rem}
    .app{max-width:500px;margin:0 auto;display:flex;flex-direction:column;gap:1rem}
    
    .header{text-align:center;color:#fff;padding:1.5rem 0}
    .header h1{font-size:2.5rem;text-shadow:0 2px 10px rgba(0,0,0,.2)}
    
    .card{background:var(--card);border-radius:1rem;padding:1.25rem;box-shadow:0 10px 25px rgba(0,0,0,.1)}
    .card-title{font-size:1.1rem;font-weight:700;color:var(--text);margin-bottom:1rem}
    
    .form-grid{display:flex;flex-direction:column;gap:.75rem}
    input,select{padding:.75rem 1rem;border:2px solid var(--border);border-radius:.75rem;font-size:1rem}
    input:focus,select:focus{outline:none;border-color:var(--primary)}
    
    .btn{padding:1rem;border:none;border-radius:.75rem;font-size:1rem;font-weight:700;cursor:pointer;width:100%}
    .btn-save{background:var(--accent);color:#fff}
    
    .total-box{background:var(--primary);color:#fff;padding:1rem;border-radius:.75rem;text-align:center;margin-bottom:.75rem}
    .total-box .value{font-size:2rem;font-weight:800}
    
    .balance-grid{display:grid;grid-template-columns:1fr 1fr;gap:.75rem;margin-bottom:.75rem}
    .balance-item{padding:1rem;border-radius:.75rem;text-align:center}
    .balance-item.sara{background:linear-gradient(135deg,#fdf2f8,#fce7f3)}
    .balance-item.rui{background:linear-gradient(135deg,#eff6ff,#dbeafe)}
    .balance-item .emoji{font-size:1.5rem}
    .balance-item .value{font-size:1.4rem;font-weight:800;color:var(--text)}
    .balance-item .label{font-size:.75rem;color:var(--muted)}
    
    .settlement{padding:1rem;border-radius:.75rem;text-align:center;font-weight:600}
    .settlement.even{background:#d1fae5;color:#065f46}
    .settlement.pay{background:#fef3c7;color:#92400e}
    
    .expense-item{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:#f8fafc;border-radius:.75rem;margin-bottom:.5rem}
    .expense-item .info{display:flex;flex-direction:column;gap:.1rem}
    .expense-item .payer{font-weight:700;color:var(--text)}
    .expense-item .desc{font-size:.8rem;color:var(--muted)}
    .expense-item .amount{font-weight:800;color:var(--primary);font-size:1.1rem}
    .expense-item button{background:none;border:none;font-size:1.2rem;cursor:pointer;opacity:.5}
    .expense-item button:hover{opacity:1}
    
    /* Sec√ß√£o de Arquivar */
    .archive-section{margin-top:1rem;padding-top:1rem;border-top:2px dashed var(--border)}
    .archive-title{font-size:.85rem;color:var(--muted);text-align:center;margin-bottom:.75rem}
    .archive-buttons{display:grid;grid-template-columns:1fr 1fr;gap:.5rem}
    .archive-btn{padding:.85rem;border:3px solid var(--border);border-radius:.75rem;background:#fff;font-size:.95rem;font-weight:700;cursor:pointer;transition:all .3s;display:flex;align-items:center;justify-content:center;gap:.4rem}
    .archive-btn:hover{border-color:var(--muted);background:#f8fafc}
    .archive-btn.approved{background:var(--warning);border-color:var(--warning);color:#fff;transform:scale(1.02)}
    .archive-btn.done{background:var(--accent);border-color:var(--accent);color:#fff}
    .archive-status{text-align:center;font-size:.9rem;color:var(--text);margin-top:.75rem;padding:.5rem;border-radius:.5rem;font-weight:600}
    .archive-status.waiting{background:#fef3c7;color:#92400e}
    .archive-status.success{background:#d1fae5;color:#065f46}
    
    /* Hist√≥rico */
    .hist-toggle{background:#475569;color:#fff;margin-top:1rem;font-size:.85rem;padding:.75rem}
    .hist-section{display:none;margin-top:1rem;padding-top:1rem;border-top:2px dashed var(--border)}
    
    /* Tabs de per√≠odo */
    .period-tabs{display:flex;gap:.4rem;margin-bottom:1rem;flex-wrap:wrap}
    .period-tab{padding:.5rem .75rem;border:none;border-radius:2rem;background:#e2e8f0;color:var(--muted);font-size:.8rem;font-weight:600;cursor:pointer;transition:all .2s}
    .period-tab.active{background:var(--primary);color:#fff}
    .period-tab:hover{background:#cbd5e1}
    .period-tab.active:hover{background:var(--primary)}
    
    .report-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:.5rem}
    .report-card{background:#f1f5f9;padding:.75rem;border-radius:.75rem;text-align:center}
    .report-card .icon{font-size:1.25rem}
    .report-card .value{font-size:1.25rem;font-weight:800;color:var(--text)}
    .report-card .label{font-size:.7rem;color:var(--muted)}
    
    .report-period{text-align:center;font-size:.8rem;color:var(--muted);margin-top:.5rem}
  </style>
</head>
<body>
  <div class="app">
    
    <div class="header">
      <h1>üí∞ Sara & Rui</h1>
      <p>Contas a meias</p>
    </div>

    <!-- Nova Despesa -->
    <div class="card">
      <div class="card-title">‚ûï Nova Despesa</div>
      <form id="expenseForm" class="form-grid">
        <select id="payer" required>
          <option value="" disabled selected>Quem pagou?</option>
          <option value="Sara">üë© Sara</option>
          <option value="Rui">üë® Rui</option>
        </select>
        <input id="amount" type="number" step="0.01" min="0.01" placeholder="Quanto? (‚Ç¨)" required />
        <input id="description" type="text" maxlength="50" placeholder="O qu√™?" required />
        <button type="submit" class="btn btn-save">‚úì Guardar</button>
      </form>
    </div>

    <!-- Saldo -->
    <div class="card">
      <div class="card-title">üìä Saldo</div>
      <div class="total-box">
        <div class="value"><span id="totalSum">0.00</span> ‚Ç¨</div>
      </div>
      <div class="balance-grid">
        <div class="balance-item sara">
          <div class="emoji">üë©</div>
          <div class="value"><span id="balanceSara">0.00</span> ‚Ç¨</div>
          <div class="label">Sara pagou</div>
        </div>
        <div class="balance-item rui">
          <div class="emoji">üë®</div>
          <div class="value"><span id="balanceRui">0.00</span> ‚Ç¨</div>
          <div class="label">Rui pagou</div>
        </div>
      </div>
      <div id="settlements" class="settlement even">‚úÖ Tudo certo!</div>
    </div>

    <!-- Despesas -->
    <div class="card">
      <div class="card-title">üßæ Despesas</div>
      <div id="list"></div>
      
      <!-- Arquivar -->
      <div class="archive-section">
        <div class="archive-title">üìÅ Arquivar (precisam os dois)</div>
        <div class="archive-buttons">
          <button id="archiveSara" class="archive-btn">üë© Sara</button>
          <button id="archiveRui" class="archive-btn">üë® Rui</button>
        </div>
        <div id="archive-status" class="archive-status" style="display:none"></div>
      </div>
      
      <!-- Hist√≥rico -->
      <button id="histToggle" class="btn hist-toggle">üìú Ver Hist√≥rico</button>
      <div id="hist-section" class="hist-section">
        
        <!-- Tabs de per√≠odo -->
        <div class="period-tabs">
          <button class="period-tab active" data-days="7">7 dias</button>
          <button class="period-tab" data-days="15">15 dias</button>
          <button class="period-tab" data-days="30">1 m√™s</button>
          <button class="period-tab" data-days="90">3 meses</button>
          <button class="period-tab" data-days="0">Tudo</button>
        </div>
        
        <div class="report-grid">
          <div class="report-card">
            <div class="icon">üí∏</div>
            <div class="value" id="report-total">0 ‚Ç¨</div>
            <div class="label">Total</div>
          </div>
          <div class="report-card">
            <div class="icon">üìÖ</div>
            <div class="value" id="report-avg">0 ‚Ç¨</div>
            <div class="label">M√©dia/dia</div>
          </div>
          <div class="report-card">
            <div class="icon">üë©</div>
            <div class="value" id="report-sara">0 ‚Ç¨</div>
            <div class="label">Sara</div>
          </div>
          <div class="report-card">
            <div class="icon">üë®</div>
            <div class="value" id="report-rui">0 ‚Ç¨</div>
            <div class="label">Rui</div>
          </div>
        </div>
        <p id="report-period" class="report-period"></p>
      </div>
    </div>

  </div>
  <script src="script.js"></script>
</body>
</html>
