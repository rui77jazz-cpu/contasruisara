
<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üí∞ Sara & Rui</title>

  <!-- Firebase (compat) -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

  <style>
    :root{
      --primary:#6366f1;
      --primary-dark:#4f46e5;
      --accent:#10b981;
      --accent-dark:#059669;
      --danger:#ef4444;
      --danger-dark:#dc2626;
      --warning:#f59e0b;
      --text:#1e293b;
      --muted:#64748b;
      --bg:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      --card:#fff;
      --card-hover:#f8fafc;
      --border:#e2e8f0;
      --shadow:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04);
      --r:1rem;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:'Segoe UI',system-ui,-apple-system,sans-serif;
      background:var(--bg);
      min-height:100vh;
      padding:1rem;
    }
    .app{
      max-width:500px;
      margin:0 auto;
      display:flex;
      flex-direction:column;
      gap:1rem;
    }
    
    /* Header */
    .header{
      text-align:center;
      color:#fff;
      padding:1.5rem 0;
    }
    .header h1{
      font-size:2.5rem;
      text-shadow:0 2px 10px rgba(0,0,0,.2);
    }
    .header p{font-size:1rem;opacity:.9}

    /* Cards */
    .card{
      background:var(--card);
      border-radius:var(--r);
      padding:1.25rem;
      box-shadow:var(--shadow);
    }
    .card-title{
      font-size:1.1rem;
      font-weight:700;
      color:var(--text);
      margin-bottom:1rem;
      display:flex;
      align-items:center;
      gap:.5rem;
    }

    /* Form */
    .form-grid{display:flex;flex-direction:column;gap:.75rem}
    .input-group{display:flex;flex-direction:column;gap:.25rem}
    .input-group label{font-size:.8rem;color:var(--muted);font-weight:600}
    .input-group input,.input-group select{
      padding:.75rem 1rem;
      border:2px solid var(--border);
      border-radius:.75rem;
      font-size:1rem;
      transition:border-color .2s;
    }
    .input-group input:focus,.input-group select:focus{
      outline:none;
      border-color:var(--primary);
    }
    .btn{
      padding:1rem;
      border:none;
      border-radius:.75rem;
      font-size:1rem;
      font-weight:700;
      cursor:pointer;
      transition:transform .1s,box-shadow .2s;
    }
    .btn:active{transform:scale(.98)}
    .btn-primary{
      background:linear-gradient(135deg,var(--accent) 0%,var(--accent-dark) 100%);
      color:#fff;
      box-shadow:0 4px 14px rgba(16,185,129,.4);
    }

    /* Balance Display */
    .balance-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:.75rem;
      margin-bottom:1rem;
    }
    .balance-item{
      background:linear-gradient(135deg,#f0f9ff 0%,#e0f2fe 100%);
      padding:1rem;
      border-radius:.75rem;
      text-align:center;
    }
    .balance-item.sara{background:linear-gradient(135deg,#fdf2f8 0%,#fce7f3 100%)}
    .balance-item.rui{background:linear-gradient(135deg,#eff6ff 0%,#dbeafe 100%)}
    .balance-item .emoji{font-size:1.5rem}
    .balance-item .value{font-size:1.5rem;font-weight:800;color:var(--text)}
    .balance-item .label{font-size:.75rem;color:var(--muted)}
    
    .total-box{
      background:linear-gradient(135deg,var(--primary) 0%,var(--primary-dark) 100%);
      color:#fff;
      padding:1rem;
      border-radius:.75rem;
      text-align:center;
      margin-bottom:.75rem;
    }
    .total-box .value{font-size:2rem;font-weight:800}
    .total-box .label{font-size:.8rem;opacity:.9}
    
    .settlement{
      padding:1rem;
      border-radius:.75rem;
      text-align:center;
      font-weight:600;
      font-size:.95rem;
    }
    .settlement.even{background:#d1fae5;color:#065f46}
    .settlement.pay{background:#fef3c7;color:#92400e}

    /* Expense List */
    #loading-status{
      text-align:center;
      color:var(--muted);
      font-size:.85rem;
      padding:.5rem;
    }
    .expense-item{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:.75rem;
      background:var(--card-hover);
      border-radius:.75rem;
      margin-bottom:.5rem;
    }
    .expense-item .info{display:flex;flex-direction:column;gap:.15rem}
    .expense-item .payer{font-weight:700;color:var(--text);font-size:.95rem}
    .expense-item .desc{font-size:.8rem;color:var(--muted)}
    .expense-item .right{display:flex;align-items:center;gap:.5rem}
    .expense-item .amount{font-weight:800;color:var(--primary);font-size:1.1rem}
    .expense-item .delete-btn{
      background:none;
      border:none;
      font-size:1.2rem;
      cursor:pointer;
      opacity:.5;
      transition:opacity .2s;
    }
    .expense-item .delete-btn:hover{opacity:1}

    /* Bot√µes de Arquivar */
    .archive-section{
      margin-top:1rem;
      padding-top:1rem;
      border-top:1px solid var(--border);
    }
    .archive-title{
      font-size:.85rem;
      color:var(--muted);
      text-align:center;
      margin-bottom:.75rem;
    }
    .archive-buttons{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:.5rem;
    }
    .archive-btn{
      padding:.75rem;
      border:2px solid var(--border);
      border-radius:.75rem;
      background:#fff;
      font-size:.9rem;
      font-weight:600;
      cursor:pointer;
      transition:all .2s;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:.4rem;
    }
    .archive-btn:hover{
      border-color:var(--muted);
    }
    .archive-btn.approved{
      background:var(--warning);
      border-color:var(--warning);
      color:#fff;
    }
    .archive-btn.approved:hover{
      background:#d97706;
    }
    .archive-status{
      text-align:center;
      font-size:.8rem;
      color:var(--muted);
      margin-top:.5rem;
    }

    /* Tabs */
    .tabs{
      display:flex;
      gap:.4rem;
      overflow-x:auto;
      padding-bottom:.25rem;
      margin-bottom:1rem;
    }
    .tab-btn{
      padding:.5rem .75rem;
      border:none;
      border-radius:2rem;
      background:#f1f5f9;
      color:var(--muted);
      font-size:.8rem;
      font-weight:600;
      cursor:pointer;
      white-space:nowrap;
      transition:all .2s;
    }
    .tab-btn.active{
      background:var(--primary);
      color:#fff;
    }

    /* Report Cards */
    .report-grid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:.5rem;
    }
    .report-card{
      background:linear-gradient(135deg,#f8fafc 0%,#f1f5f9 100%);
      padding:.75rem;
      border-radius:.75rem;
      text-align:center;
    }
    .report-card .icon{font-size:1.25rem}
    .report-card .value{font-size:1.25rem;font-weight:800;color:var(--text)}
    .report-card .label{font-size:.7rem;color:var(--muted)}

    #report-status{
      text-align:center;
      font-size:.8rem;
      color:var(--muted);
      padding:.5rem;
      margin-top:.5rem;
    }
  </style>
</head>
<body>
  <div class="app">
    
    <!-- Header -->
    <div class="header">
      <h1>üí∞ Sara & Rui</h1>
      <p>Contas a meias</p>
    </div>

    <!-- Nova Despesa -->
    <div class="card">
      <div class="card-title">‚ûï Nova Despesa</div>
      <form id="expenseForm" class="form-grid">
        <div class="input-group">
          <label>Quem pagou?</label>
          <select id="payer" required>
            <option value="" disabled selected>Escolher...</option>
            <option value="Sara">üë© Sara</option>
            <option value="Rui">üë® Rui</option>
          </select>
        </div>
        <div class="input-group">
          <label>Quanto? (‚Ç¨)</label>
          <input id="amount" type="number" step="0.01" min="0.01" placeholder="0.00" required />
        </div>
        <div class="input-group">
          <label>O qu√™?</label>
          <input id="description" type="text" maxlength="50" placeholder="Ex: Jantar" required />
        </div>
        <button type="submit" class="btn btn-primary">‚úì Guardar</button>
      </form>
    </div>

    <!-- Saldo Atual -->
    <div class="card">
      <div class="card-title">üìä Saldo</div>
      
      <div class="total-box">
        <div class="value"><span id="totalSum">0.00</span> ‚Ç¨</div>
        <div class="label">Total</div>
      </div>
      
      <div class="balance-grid">
        <div class="balance-item sara">
          <div class="emoji">üë©</div>
          <div class="value"><span id="balanceSara">0.00</span> ‚Ç¨</div>
          <div class="label">Sara pagou</div>
        </div>
        <div class="balance-item rui">
          <div class="emoji">üë®</div>
          <div class="value"><span id="balanceRui">0.00</span> ‚Ç¨</div>
          <div class="label">Rui pagou</div>
        </div>
      </div>
      
      <div id="settlements" class="settlement even">‚úÖ Tudo certo!</div>
    </div>

    <!-- Despesas Ativas -->
    <div class="card">
      <div class="card-title">üßæ Despesas</div>
      <p id="loading-status">A carregar...</p>
      <div id="list"></div>
      
      <!-- Arquivar com dupla aprova√ß√£o -->
      <div class="archive-section">
        <div class="archive-title">üìÅ Arquivar despesas (precisa dos dois)</div>
        <div class="archive-buttons">
          <button id="archiveSara" class="archive-btn">üë© Sara aprova</button>
          <button id="archiveRui" class="archive-btn">üë® Rui aprova</button>
        </div>
        <p id="archive-status" class="archive-status"></p>
      </div>
    </div>

    <!-- Relat√≥rios -->
    <div class="card">
      <div class="card-title">üìà Hist√≥rico</div>
      
      <div class="tabs">
        <button class="tab-btn active" data-days="7">7 dias</button>
        <button class="tab-btn" data-days="15">15 dias</button>
        <button class="tab-btn" data-days="30">1 m√™s</button>
        <button class="tab-btn" data-days="90">3 meses</button>
        <button class="tab-btn" data-days="0">Tudo</button>
      </div>

      <div class="report-grid">
        <div class="report-card">
          <div class="icon">üí∏</div>
          <div class="value" id="report-total">0 ‚Ç¨</div>
          <div class="label">Total</div>
        </div>
        <div class="report-card">
          <div class="icon">üìÖ</div>
          <div class="value" id="report-avg">0 ‚Ç¨</div>
          <div class="label">M√©dia/dia</div>
        </div>
        <div class="report-card">
          <div class="icon">üë©</div>
          <div class="value" id="report-sara">0 ‚Ç¨</div>
          <div class="label">Sara</div>
        </div>
        <div class="report-card">
          <div class="icon">üë®</div>
          <div class="value" id="report-rui">0 ‚Ç¨</div>
          <div class="label">Rui</div>
        </div>
      </div>

      <p id="report-status"></p>
    </div>

  </div>

  <script src="script.js" defer></script>
</body>
</html>
